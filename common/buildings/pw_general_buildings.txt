pw_building_space_elevator = {
	base_buildtime = @pw_building_buildtime
	add_to_first_building_slot = yes
	base_cap_amount = 1
	can_be_ruined = no

	category = trade

	potential = {
		exists = owner
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { is_planet_class = pc_habitat }
		NOT = { is_planet_class = pc_ringworld_habitable }
	}

	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	allow = {
		has_major_upgraded_capital = yes
		free_district_slots > 0 # Needs a free district to occupy
		pw_can_build_planetary_wonder = yes #Check if there is space for the Wonder
	}

	planet_modifier = {
		planet_max_districts_add = -1
		pop_resettlement_cost_mult = -0.5
		planet_amenities_mult = 0.2
		# planet_immigration_pull_mult = 0.25
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_clerk_add = @pw_building_worker_jobs
			# job_merchant_add = @pw_building_ruler_jobs
			job_merchant_per_pop = 0.02 # +1 per 50 pop.
			job_enforcer_add = 1
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_maintenance_drone_add = @pw_building_menial_jobs
			job_synapse_drone_per_pop = 0.02 # +1 per 50 pop.
			job_patrol_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_maintenance_drone_add = @pw_building_menial_jobs
			job_evaluator_per_pop = 0.02 # +1 per 50 pop.
			job_patrol_drone_add = 2
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_edict = pw_ambition_monumentality }
		}
		modifier = {
			planet_stability_add = @pw_stability_production
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @pw_building_cost
		}
		upkeep = {
			energy = @pw_building_upkeep
		}
	}

	prerequisites = {
		pw_tech_space_elevator
	}

	triggered_desc = {
		text = pw_planet_wonder_lb
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_clerk_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_merchant_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_enforcer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_patrol_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = yes }
		}
		text = job_maintenance_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_synapse_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_evaluator_effect_desc
	}

	on_built = {
		planet_event = { id = pw_wonder.100 }
	}
}

pw_building_galactic_model = {
	base_buildtime = @pw_building_buildtime
	add_to_first_building_slot = yes
	base_cap_amount = 1
	can_be_ruined = no

	category = government

	potential = {
		exists = owner
		NOT = { has_modifier = resort_colony }
		NOT = { has_modifier = slave_colony }
		NOT = { is_planet_class = pc_habitat }

		# Empire Unique:
		pw_is_wonder_empire_unique = { WONDER = pw_building_galactic_model }
		# owner = { NOT = { any_owned_planet = { OR = {
		# 	has_building = pw_building_galactic_model
		# 	has_building_construction = pw_building_galactic_model
		# }}}}
	}

	allow = {
		has_major_upgraded_capital = yes
		free_district_slots > 0 # Needs a free district to occupy
		pw_can_build_planetary_wonder = yes #Check if there is space for the Wonder
	}

	destroy_trigger = {
		OR = {
			has_modifier = slave_colony
			has_modifier = resort_colony
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @pw_building_cost
			rare_crystals = @pw_building_cost_rare
		}
		upkeep = {
			energy = @pw_building_upkeep
			rare_crystals = @pw_building_upkeep_rare
		}
	}

	planet_modifier = {
		planet_max_districts_add = -1
	}

	country_modifier = {
		country_admin_cap_mult = 0.2
		diplomacy_upkeep_mult = 0.2
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_bureaucrat_add = @pw_building_specialist_jobs
			job_administrator_add = @pw_building_ruler_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_synapse_drone_add = @pw_building_complex_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_coordinator_add = @pw_building_complex_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_edict = pw_ambition_monumentality }
		}
		modifier = {
			planet_stability_add = @pw_stability_production
		}
	}

	prerequisites = {
		pw_tech_galactic_modeling
	}

	triggered_desc = {
		text = pw_planet_wonder_lb
	}

	triggered_desc = {
		text = pw_empire_unique_lb
	}

	triggered_desc = {
		text = pw_building_galactic_model_policy_tooltip
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_bureaucrat_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		text = job_administrator_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_synapse_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_coordinator_effect_desc
	}

	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			buildings_has_crystals = no
		}
		modifier = {
			factor = 2
			owner = { empire_sprawl_over_cap > 0 }
		}
		modifier = {
			factor = 2
			owner = { empire_sprawl_over_cap > 10 }
		}
		modifier = {
			factor = 2
			owner = { empire_sprawl_over_cap > 20 }
		}
		modifier = {
			factor = 2
			owner = { empire_sprawl_over_cap > 40 }
		}
		modifier = {
			factor = 2
			owner = { has_valid_civic = civic_byzantine_bureaucracy }
		}
	}

	on_built = {
		planet_event = { id = pw_wonder.800 }
	}
}

pw_building_panopticon = {
	base_buildtime = @pw_building_buildtime
	add_to_first_building_slot = yes
	base_cap_amount = 1
	can_be_ruined = no

	category = government

	potential = {
		exists = owner
		OR = {
			has_modifier = penal_colony
			owner = { has_valid_civic = civic_police_state }
		}
	}

	destroy_trigger = {
		NOR = {
			has_modifier = penal_colony
			owner = { has_civic = civic_police_state }
		}
	}

	convert_to = {
		building_hall_judgment
		building_sentinel_posts
		building_psi_corps
	}

	allow = {
		has_major_upgraded_capital = yes
		free_district_slots > 0 # Needs a free district to occupy
		pw_can_build_planetary_wonder = yes #Check if there is space for the Wonder
	}

	planet_modifier = {
		planet_max_districts_add = -1
	}

	country_modifier = {
		#Test!!!
		planet_crime_mult = -0.2
		#Test!!!
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
		}
		modifier = {
			job_enforcer_add = @pw_building_specialist_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { has_edict = pw_edict_panspectron }
		}
		modifier = {
			job_pw_big_brother_add = @pw_building_ruler_jobs
		}
	}

	#Impossible in Vanilla
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		modifier = {
			job_patrol_drone_add = @pw_building_complex_jobs
		}
	}

	#Impossible in Vanilla
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		modifier = {
			job_patrol_drone_add = @pw_building_complex_jobs
		}
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_edict = pw_ambition_monumentality }
		}
		modifier = {
			planet_stability_add = @pw_stability_production
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @pw_building_cost
		}
		upkeep = {
			energy = @pw_building_upkeep
		}
	}

	prerequisites = {
		pw_tech_utilitarian_vigilance
	}

	triggered_desc = {
		text = pw_planet_wonder_lb
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_gestalt = no }
		}
		text = job_enforcer_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_regular_empire = yes }
			owner = { has_edict = pw_edict_panspectron }
		}
		text = job_pw_big_brother_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_hive_empire = yes }
		}
		text = job_patrol_drone_effect_desc
	}

	triggered_desc = {
		trigger = {
			exists = owner
			owner = { is_machine_empire = yes }
		}
		text = job_patrol_drone_effect_desc
	}

	on_built = {
		planet_event = { id = pw_wonder.900 }
	}
}
