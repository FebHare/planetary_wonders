# Base tech: Planetary Mega-Engineering

pw_tech_planetary_mega_engineering = {
	area = engineering
	category = { industry }
	cost = @tier4cost2
	tier = 4
	ai_update_type = all
	prerequisites = { "tech_housing_1" "tech_construction_templates" "tech_galactic_administration" }
	weight = @tier4weight2
	is_rare = yes

	# feature_flags = {
	# 	megaengineering
	# }

	modifier = {
		country_resource_max_add = 5000
		planet_building_build_speed_mult = 0.50
	}

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 1.5
			OR = {
				research_leader = {
					area = engineering
					has_trait = "leader_trait_expertise_industry"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_curator"
				}
				research_leader = {
					area = engineering
					has_trait = "leader_trait_maniacal"
				}
			}
		}

		modifier = {
			factor = @ap_technological_ascendancy_rare_tech
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = 1.25
			OR = {
				has_ascension_perk = ap_arcology_project
				has_ascension_perk = ap_machine_worlds
				has_ascension_perk = ap_hive_worlds
			}
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_planetary_mega_engineering }
			}
		}

		modifier = {
			factor = 2
			any_neighbor_country = {
				has_technology = pw_tech_planetary_mega_engineering
			}
		}

		modifier = {
			factor = 2
			has_ascension_perk = ap_master_builders
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_industry"
			}
		}
	}
}

# Individual tech: Planetary Wonders

# Particle Supercollider
pw_tech_particle_supercollider = {
	area = physics
	cost = @tier4cost2
	tier = 4
	category = { particles }
	ai_update_type = all
	prerequisites = { "pw_tech_planetary_mega_engineering" }
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = "leader_trait_maniacal"
			}
		}

		modifier = {
			factor = 2
			research_leader = {
				area = physics
				has_trait = "leader_trait_spark_of_genius"
			}
		}

		modifier = {
			factor = 3
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_particle_supercollider }
			}
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = physics
				has_trait = "leader_trait_expertise_particles"
			}
		}
	}
}

#Space Elevator
pw_tech_space_elevator = {
	area = engineering
	cost = @tier4cost2
	tier = 4
	category = { voidcraft }
	ai_update_type = all
	prerequisites = { "pw_tech_planetary_mega_engineering" }
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = "leader_trait_maniacal"
			}
		}

		modifier = {
			factor = 2
			research_leader = {
				area = engineering
				has_trait = "leader_trait_spark_of_genius"
			}
		}

		modifier = {
			factor = 3
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_space_elevator }
			}
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = engineering
				has_trait = "leader_trait_expertise_voidcraft"
			}
		}
	}
}

# Domed City
pw_tech_domed_city = {
	area = society
	cost = @tier4cost2
	tier = 4
	category = { statecraft }
	ai_update_type = all
	prerequisites = { "pw_tech_planetary_mega_engineering" }
	weight = @tier4weight2
	is_rare = yes

	weight_modifier = {
		factor = 0.5
		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = "leader_trait_maniacal"
			}
		}

		modifier = {
			factor = 2
			research_leader = {
				area = society
				has_trait = "leader_trait_spark_of_genius"
			}
		}

		modifier = {
			factor = 3
			has_ascension_perk = ap_master_builders
		}

		modifier = {
			factor = 5
			has_ascension_perk = ap_technological_ascendancy
		}

		modifier = {
			factor = @federation_perk_factor
			has_federation = yes
			federation = {
				has_federation_perk = rare_tech_boost
				any_member = { has_technology = pw_tech_domed_city }
			}
		}
	}

	ai_weight = {
		factor = 10
		modifier = {
			factor = 1.25
			research_leader = {
				area = society
				has_trait = "leader_trait_expertise_statecraft"
			}
		}
	}
}
