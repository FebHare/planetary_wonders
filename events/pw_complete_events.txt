namespace = pw_complete

#Message for wonder construction complete
# UNUSED!
planet_event = {
	id = pw_complete.1
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_space_elevator_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = WONDER
				scope = FROM
			}
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}
	}
}

# Space Elevator -> id 100

#On Space Elevator built
planet_event = {
	id = pw_complete.100
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_space_elevator_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_complete.101 }
	}
}

#On first time Space Elevator is built
planet_event = {
	id = pw_complete.101
	title = "pw_complete.101.name"
	desc = "pw_complete.101.desc"
	picture = GFX_evt_metropolis
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_complete.101.a
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_xenophobe }
		}
	}

	option = {
		name = pw_complete.101.b
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_xenophile }
		}
	}

	trigger = {
		NOT = {owner = {has_country_flag = space_elevator_built}}
	}

	immediate = {
		owner = { set_country_flag = space_elevator_built }
	}

}

# Particle Supercollider -> id 200

#On Particle Supercollider built
planet_event = {
	id = pw_complete.200
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_particle_supercollider_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_complete.201 }
	}
}

#On first time Particle Supercollider is built
planet_event = {
	id = pw_complete.201
	title = "pw_complete.201.name"
	desc = "pw_complete.201.desc"
	picture = GFX_evt_ancient_databank
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_complete.201.a
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_spiritualist }
		}
	}

	option = {
		name = pw_complete.201.b
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_materialist }
		}
	}

	trigger = {
		NOT = {owner = {has_country_flag = particle_supercollider_built}}
	}

	immediate = {
		owner = { set_country_flag = particle_supercollider_built }
	}
}

# Domed City -> id 300

#On Domed City built
planet_event = {
	id = pw_complete.300
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_domed_city_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_complete.301 }
	}
}

#On first time Domed City is built
planet_event = {
	id = pw_complete.301
	title = "pw_complete.301.name"
	desc = "pw_complete.301.desc"
	picture = GFX_evt_society_research
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_complete.301.a
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_authoritarian }
		}
	}

	option = {
		name = pw_complete.301.b
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_egalitarian }
		}
	}

	trigger = {
		NOT = {owner = {has_country_flag = domed_city_built}}
	}

	immediate = {
		owner = { set_country_flag = domed_city_built }
	}
}

# Abyssal Crater Test Site -> id 400

#On Abyssal Crater Test Site built
planet_event = {
	id = pw_complete.400
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_domed_city_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_complete.401 }
	}
}

#On first time Abyssal Crater Test Site is built
planet_event = {
	id = pw_complete.401
	title = "pw_complete.401.name"
	desc = "pw_complete.401.desc"
	picture = GFX_evt_underground_civilization
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_complete.401.a
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_militarist }
		}
	}

	option = {
		name = pw_complete.401.b
		add_modifier = {
			modifier = pw_mod_wonder_built_recently_happiness
			days = 1800 # 5 years
		}
		trigger = {
			NOT = { owner = is_pacifist }
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = abyssal_crater_test_site_built }}
	}

	immediate = {
		owner = { set_country_flag = abyssal_crater_test_site_built }
	}
}
