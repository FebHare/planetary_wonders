namespace = pw_holy_reliquary

#Holy Reliquary Hub Event
country_event = {
	id = pw_holy_reliquary.1
	title = pw_holy_reliquary.1.name
	desc = {
		trigger = {
			has_country_flag = pw_holy_reliquary_sanctified_mirror
			has_country_flag = pw_holy_reliquary_sanctified_scepter
			has_country_flag = pw_holy_reliquary_sanctified_codex
		}
		text = pw_holy_reliquary.1.all.desc
	}
	desc = {
		trigger = {
			OR = {
				has_country_flag = pw_holy_reliquary_sanctified_mirror
				has_country_flag = pw_holy_reliquary_sanctified_scepter
				has_country_flag = pw_holy_reliquary_sanctified_codex
			}
			NAND = {
				has_country_flag = pw_holy_reliquary_sanctified_mirror
				has_country_flag = pw_holy_reliquary_sanctified_scepter
				has_country_flag = pw_holy_reliquary_sanctified_codex
			}
		}
		text = pw_holy_reliquary.1.some.desc
	}
	desc = {
		trigger = {
			NOR = {
				has_country_flag = pw_holy_reliquary_sanctified_mirror
				has_country_flag = pw_holy_reliquary_sanctified_scepter
				has_country_flag = pw_holy_reliquary_sanctified_codex
			}
		}
		text = pw_holy_reliquary.1.none.desc
	}
	picture = GFX_evt_ancient_records
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_country_flag = pw_is_in_holy_reliquary
		}
	}

	immediate = {
		set_country_flag = pw_is_in_holy_reliquary
	}

	#Expansion: Stargazing Mirror -> 100
	option = { #Sanctify
		name = pw_holy_reliquary.1.expansion.sanctify
		trigger = {
			NOT = { has_country_flag = pw_holy_reliquary_sanctified_mirror }
		}
		allow = {
			if = {
				limit = { NOT = { has_country_flag = pw_holy_reliquary_alternate_traditions }}
				has_tradition = tr_expansion_finish
			}
			else = {
				pw_alternate_tradition_can_sanctify_relic = yes
			}
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.100
			}
		}
	}

	option = { #Access
		name = pw_holy_reliquary.1.expansion.access
		trigger = {
			has_country_flag = pw_holy_reliquary_sanctified_mirror
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.105
			}
		}
	}

	#Domination: Scepter of the Solar-Regent -> 200
	option = { #Sanctify
		name = pw_holy_reliquary.1.domination.sanctify
		trigger = {
			NOT = { has_country_flag = pw_holy_reliquary_sanctified_scepter }
		}
		allow = {
			if = {
				limit = { NOT = { has_country_flag = pw_holy_reliquary_alternate_traditions }}
				has_tradition = tr_domination_finish
			}
			else = {
				pw_alternate_tradition_can_sanctify_relic = yes
			}
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.200
			}
		}
	}

	option = { #Access
		name = pw_holy_reliquary.1.domination.access
		trigger = {
			has_country_flag = pw_holy_reliquary_sanctified_scepter
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.205
			}
		}
	}

	#Discovery: Codex of the Ages
	option = { #Sanctify
		name = pw_holy_reliquary.1.discovery.sanctify
		trigger = {
			NOT = { has_country_flag = pw_holy_reliquary_sanctified_codex }
		}
		allow = {
			if = {
				limit = { NOT = { has_country_flag = pw_holy_reliquary_alternate_traditions }}
				has_tradition = tr_discovery_finish
			}
			else = {
				pw_alternate_tradition_can_sanctify_relic = yes
			}
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.700
			}
		}
	}

	option = { #Access
		name = pw_holy_reliquary.1.discovery.access
		trigger = {
			has_country_flag = pw_holy_reliquary_sanctified_codex
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.705
			}
		}
	}

	#Appoint Relic Keeper (all relics):
	option = {
		name = pw_holy_reliquary.1.appoint_relic_keeper

		trigger = {
			NOT = { has_country_flag = pw_holy_reliquary_relic_keeper_appointed }
		}

		allow = {
			pw_has_sanctified_all_relics = yes
		}

		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.800
			}
		}
	}

	#Venerate Tradition (all relics):
	option = {
		name = pw_holy_reliquary.1.venerate_tradition

		trigger = {
			NOT = { has_country_flag = pw_holy_reliquary_venerated_tradition }
		}

		allow = {
			pw_has_sanctified_all_relics = yes
		}

		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.900
			}
		}
	}

	#Change Tradition Philosophy
	option = {
		name = pw_holy_reliquary.1.change_tradition_philosophy
		custom_tooltip = pw_holy_reliquary.1.change_tradition_philosophy.tooltip

		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.1000
			}
		}
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#Expansion Artifact (Stargazing Mirror) -> 100
#Sanctify:
country_event = {
	id = pw_holy_reliquary.100
	title = pw_holy_reliquary.100.name
	desc = pw_holy_reliquary.100.desc
	picture = GFX_evt_stargazing_mirror
	is_triggered_only = yes

	#Sanctify
	option = {
		name = pw_holy_reliquary.100.a
		allow = {
			hidden_trigger = { NOT = { has_country_flag = pw_holy_reliquary_sanctified_mirror }}
			pw_has_unity_to_sanctify_artifact = yes
		}
		pw_holy_reliquary_pay_sanctify_cost = yes
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.101 }
		}
	}
	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Just Sanctified:
country_event = {
	id = pw_holy_reliquary.101
	title = pw_holy_reliquary.101.name
	desc = pw_holy_reliquary.101.desc
	picture = GFX_evt_stargazing_mirror
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_sanctified_artifacts_count
			value = 1
		}
		set_country_flag = pw_holy_reliquary_sanctified_mirror
	}

	#Introspective Gaze
	option = {
		name = pw_holy_reliquary.101.a
		custom_tooltip = pw_holy_reliquary.101.a.tooltip
		add_modifier = {
			modifier = pw_holy_reliquary_expansion_introspective_gaze
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			country_event = {
				id = pw_holy_reliquary.110
			}
		}
	}

	#Extrospective Gaze
	option = {
		name = pw_holy_reliquary.101.b
		custom_tooltip = pw_holy_reliquary.101.b.tooltip
		add_modifier = {
			modifier = pw_holy_reliquary_expansion_extrospective_gaze
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			country_event = {
				id = pw_holy_reliquary.120
			}
		}
	}
}

#Access:
country_event = {
	id = pw_holy_reliquary.105
	title = pw_holy_reliquary.105.name
	desc = pw_holy_reliquary.105.desc
	picture = GFX_evt_stargazing_mirror
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	#Introspective Gaze
	option = {
		name = pw_holy_reliquary.101.a
		custom_tooltip = pw_holy_reliquary.101.a.tooltip
		allow = {
			NOT = { has_modifier = pw_holy_reliquary_expansion_introspective_gaze }
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_holy_reliquary_change_artifact_cost_check
			}
		}
		add_resource = {
			influence = @pw_holy_reliquary_change_artifact_cost
		}
		add_modifier = {
			modifier = pw_holy_reliquary_expansion_introspective_gaze
		}
		if = {
			limit = {
				has_modifier = pw_holy_reliquary_expansion_extrospective_gaze
			}
			remove_modifier = pw_holy_reliquary_expansion_extrospective_gaze
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			country_event = {
				id = pw_holy_reliquary.110
			}
		}
	}

	#Way of the Void-Speakers
	option = {
		name = pw_holy_reliquary.201.b
		custom_tooltip = pw_holy_reliquary.201.b.tooltip
		allow = {
			NOT = { has_modifier = pw_holy_reliquary_expansion_extrospective_gaze }
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_holy_reliquary_change_artifact_cost_check
			}
		}
		add_resource = {
			influence = @pw_holy_reliquary_change_artifact_cost
		}
		add_modifier = {
			modifier = pw_holy_reliquary_expansion_extrospective_gaze
		}
		if = {
			limit = {
				has_modifier = pw_holy_reliquary_expansion_introspective_gaze
			}
			remove_modifier = pw_holy_reliquary_expansion_introspective_gaze
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			country_event = {
				id = pw_holy_reliquary.120
			}
		}
	}

	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#Effects Description:
#Introspective Gaze (modifier)
country_event = {
	id = pw_holy_reliquary.110
	title = pw_holy_reliquary.110.name
	desc = pw_holy_reliquary.110.desc
	picture = GFX_evt_stargazing_mirror
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				NOR = {
					has_modifier = pw_holy_reliquary_expansion_reflective_meditation
					has_modifier = pw_holy_reliquary_expansion_peregrination_pathways
				}
			}
			weights = {
				base = 1
				modifier = {
					mult = 3
					num_pops > 50
				}
			}
			save_event_target_as = pw_holy_reliquary_modifier_planet
		}
	}

	option = {
		name = pw_holy_reliquary.110.a
		event_target:pw_holy_reliquary_modifier_planet = {
			add_modifier = {
				modifier = pw_holy_reliquary_expansion_reflective_meditation
				days = @pw_5years
			}
		}
		pw_holy_reliquary_return_to_hub = yes

		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.111
				days = @pw_1year
				random = @pw_1year
			}
		}
	}
}

#Introspective Gaze (tech)
country_event = {
	id = pw_holy_reliquary.111
	title = pw_holy_reliquary.111.name
	desc = pw_holy_reliquary.111.desc
	picture = GFX_evt_stargazing_mirror
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_tech_option = pw_tech_holy_reliquary_inward_expansion
			has_technology = pw_tech_holy_reliquary_inward_expansion
		}
	}

	option = {
		name = pw_holy_reliquary.111.a
		add_research_option = pw_tech_holy_reliquary_inward_expansion
	}
}

#Extrospective Gaze (modifier)
country_event = {
	id = pw_holy_reliquary.120
	title = pw_holy_reliquary.120.name
	desc = pw_holy_reliquary.120.desc
	picture = GFX_evt_stargazing_mirror
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				NOR = {
					has_modifier = pw_holy_reliquary_expansion_reflective_meditation
					has_modifier = pw_holy_reliquary_expansion_peregrination_pathways
				}
			}
			weights = {
				base = 1
				modifier = {
					mult = 3
					num_pops > 50
				}
			}
			save_event_target_as = pw_holy_reliquary_modifier_planet
		}
	}

	option = {
		name = pw_holy_reliquary.120.a
		event_target:pw_holy_reliquary_modifier_planet = {
			add_modifier = {
				modifier = pw_holy_reliquary_expansion_peregrination_pathways
				days = @pw_5years
			}
		}
		pw_holy_reliquary_return_to_hub = yes
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.121
				days = @pw_1year
				random = @pw_1year
			}
		}
	}
}

#Extrospective Gaze (tech)
country_event = {
	id = pw_holy_reliquary.121
	title = pw_holy_reliquary.121.name
	desc = pw_holy_reliquary.121.desc
	picture = GFX_evt_stargazing_mirror
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	trigger = {
		NOR = {
			has_tech_option = pw_tech_holy_reliquary_revealed_destiny
			has_technology = pw_tech_holy_reliquary_revealed_destiny
		}
	}

	option = {
		name = pw_holy_reliquary.121.a
		add_research_option = pw_tech_holy_reliquary_revealed_destiny
	}
}

#Domination Artifact (Scepter of the Solar-Regent) -> 200
#Sanctify:
country_event = {
	id = pw_holy_reliquary.200
	title = pw_holy_reliquary.200.name
	desc = pw_holy_reliquary.200.desc
	picture = GFX_evt_scepter_of_the_solar_regent
	is_triggered_only = yes

	#Sanctify
	option = {
		name = pw_holy_reliquary.200.a
		allow = {
			hidden_trigger = { NOT = { has_country_flag = pw_holy_reliquary_sanctified_scepter }}
			pw_has_unity_to_sanctify_artifact = yes
		}
		pw_holy_reliquary_pay_sanctify_cost = yes
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.201 }
		}
	}
	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Just Sanctified:
country_event = {
	id = pw_holy_reliquary.201
	title = pw_holy_reliquary.201.name
	desc = pw_holy_reliquary.201.desc
	picture = GFX_evt_scepter_of_the_solar_regent
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_sanctified_artifacts_count
			value = 1
		}
		set_country_flag = pw_holy_reliquary_sanctified_scepter
	}

	#Way of the Solar-Regent
	option = {
		name = pw_holy_reliquary.201.a
		custom_tooltip = pw_holy_reliquary.201.a.tooltip
		add_modifier = {
			modifier = pw_holy_reliquary_domination_way_of_the_solar_regent
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.210
			}
		}
	}

	#Way of the Void-Speakers
	option = {
		name = pw_holy_reliquary.201.b
		custom_tooltip = pw_holy_reliquary.201.b.tooltip
		add_modifier = {
			modifier = pw_holy_reliquary_domination_way_of_the_void_speakers
		}
		hidden_effect = {
			country_event = {
				id = pw_holy_reliquary.220
			}
		}
	}
}

#Access:
country_event = {
	id = pw_holy_reliquary.205
	title = pw_holy_reliquary.205.name
	desc = pw_holy_reliquary.205.desc
	picture = GFX_evt_scepter_of_the_solar_regent
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	#Way of the Solar-Regent
	option = {
		name = pw_holy_reliquary.201.a
		custom_tooltip = pw_holy_reliquary.201.a.tooltip
		allow = {
			NOT = { has_modifier = pw_holy_reliquary_domination_way_of_the_solar_regent }
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_holy_reliquary_change_artifact_cost_check
			}
		}
		add_resource = {
			influence = @pw_holy_reliquary_change_artifact_cost
		}
		add_modifier = {
			modifier = pw_holy_reliquary_domination_way_of_the_solar_regent
		}
		if = {
			limit = {
				has_modifier = pw_holy_reliquary_domination_way_of_the_void_speakers
			}
			remove_modifier = pw_holy_reliquary_domination_way_of_the_void_speakers
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			country_event = {
				id = pw_holy_reliquary.210
			}
		}
	}

	#Way of the Void-Speakers
	option = {
		name = pw_holy_reliquary.201.b
		custom_tooltip = pw_holy_reliquary.201.b.tooltip
		allow = {
			NOT = { has_modifier = pw_holy_reliquary_domination_way_of_the_void_speakers }
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_holy_reliquary_change_artifact_cost_check
			}
		}
		add_resource = {
			influence = @pw_holy_reliquary_change_artifact_cost
		}
		add_modifier = {
			modifier = pw_holy_reliquary_domination_way_of_the_void_speakers
		}
		if = {
			limit = {
				has_modifier = pw_holy_reliquary_domination_way_of_the_solar_regent
			}
			remove_modifier = pw_holy_reliquary_domination_way_of_the_solar_regent
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			country_event = {
				id = pw_holy_reliquary.220
			}
		}
	}

	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#Effects Description:
#Way of the Solar-Regent (shrine)
country_event = {
	id = pw_holy_reliquary.210
	title = pw_holy_reliquary.210.name
	desc = pw_holy_reliquary.210.desc
	picture = GFX_evt_scepter_of_the_solar_regent
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				NOT = { has_deposit = pw_d_monument_to_the_solar_regent }
				NOT = { has_deposit = pw_d_parliament_of_the_void_speakers }
			}
			weights = {
				base = 1
				modifier = {
					mult = 3
					num_pops > 50
				}
			}
			save_event_target_as = pw_holy_reliquary_shrine_planet
		}
	}

	option = {
		name = pw_holy_reliquary.210.a
		event_target:pw_holy_reliquary_shrine_planet = {
			add_deposit = pw_d_monument_to_the_solar_regent
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Way of the Void-Speakers (shrine)
country_event = {
	id = pw_holy_reliquary.220
	title = pw_holy_reliquary.220.name
	desc = pw_holy_reliquary.220.desc
	picture = GFX_evt_scepter_of_the_solar_regent
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		random_owned_planet = {
			limit = {
				NOT = { has_deposit = pw_d_monument_to_the_solar_regent }
				NOT = { has_deposit = pw_d_parliament_of_the_void_speakers }
			}
			weights = {
				base = 1
				modifier = {
					mult = 3
					num_pops > 50
				}
			}
			save_event_target_as = pw_holy_reliquary_shrine_planet
		}
	}

	option = {
		name = pw_holy_reliquary.220.a
		event_target:pw_holy_reliquary_shrine_planet = {
			add_deposit = pw_d_parliament_of_the_void_speakers
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Discovery Artifact (Codex of the Ages) -> 700
#Sanctify:
country_event = {
	id = pw_holy_reliquary.700
	title = pw_holy_reliquary.700.name
	desc = pw_holy_reliquary.700.desc
	picture = GFX_evt_codex_of_the_ages
	is_triggered_only = yes

	#Sanctify
	option = {
		name = pw_holy_reliquary.700.a
		allow = {
			hidden_trigger = { NOT = { has_country_flag = pw_holy_reliquary_sanctified_codex }}
			pw_has_unity_to_sanctify_artifact = yes
		}
		pw_holy_reliquary_pay_sanctify_cost = yes
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.701 }
		}
	}
	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Just Sanctified:
country_event = {
	id = pw_holy_reliquary.701
	title = pw_holy_reliquary.701.name
	desc = pw_holy_reliquary.701.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	immediate = {
		change_variable = {
			which = pw_sanctified_artifacts_count
			value = 1
		}
		set_country_flag = pw_holy_reliquary_sanctified_codex
	}

	#Codex of Past Ages
	option = {
		name = pw_holy_reliquary.701.a
		custom_tooltip = pw_holy_reliquary.701.a.tooltip
		add_modifier = {
			modifier = pw_holy_reliquary_discovery_codex_of_past_ages
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			random_list = {
				1 = { #Ruler
					modifier = {
						factor = 0
						ruler = {
							has_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
						}
					}
					country_event = { id = pw_holy_reliquary.710 }
				}
				1 = { #Governor
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = governor
								NOT = { has_trait = pw_leader_trait_governor_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.711 }
				}
				1 = { #Scientist
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = scientist
								NOT = { has_trait = pw_leader_trait_scientist_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.712 }
				}
				1 = { #Admiral
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = admiral
								NOT = { has_trait = pw_leader_trait_admiral_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.713 }
				}
				1 = { #General
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = general
								NOT = { has_trait = pw_leader_trait_general_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.714 }
				}
			}
			country_event = {
				id = pw_holy_reliquary.750
				days = @pw_2years
				random = @pw_1year
			}
		}
	}
	#Codex of Future Ages
	option = {
		name = pw_holy_reliquary.701.b
		custom_tooltip = pw_holy_reliquary.701.b.tooltip
		add_modifier = {
			modifier = pw_holy_reliquary_discovery_codex_of_future_ages
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			random_list = {
				1 = {
					country_event = { id = pw_holy_reliquary.720 }
				}
				1 = {
					country_event = { id = pw_holy_reliquary.721 }
				}
				1 = {
					country_event = { id = pw_holy_reliquary.722 }
				}
			}
			country_event = {
				id = pw_holy_reliquary.750
				days = @pw_2years
				random = @pw_1year
			}
		}
	}
}

#Access:
country_event = {
	id = pw_holy_reliquary.705
	title = pw_holy_reliquary.705.name
	desc = pw_holy_reliquary.705.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	#Codex of Past Ages
	option = {
		name = pw_holy_reliquary.701.a
		custom_tooltip = pw_holy_reliquary.701.a.tooltip
		allow = {
			NOT = { has_modifier = pw_holy_reliquary_discovery_codex_of_past_ages }
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_holy_reliquary_change_artifact_cost_check
			}
		}
		add_resource = {
			influence = @pw_holy_reliquary_change_artifact_cost
		}
		add_modifier = {
			modifier = pw_holy_reliquary_discovery_codex_of_past_ages
		}
		if = {
			limit = {
				has_modifier = pw_holy_reliquary_discovery_codex_of_future_ages
			}
			remove_modifier = pw_holy_reliquary_discovery_codex_of_future_ages
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			random_list = {
				1 = { #Ruler
					modifier = {
						factor = 0
						ruler = {
							has_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
						}
					}
					country_event = { id = pw_holy_reliquary.710 }
				}
				1 = { #Governor
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = governor
								NOT = { has_trait = pw_leader_trait_governor_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.711 }
				}
				1 = { #Scientist
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = scientist
								NOT = { has_trait = pw_leader_trait_scientist_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.712 }
				}
				1 = { #Admiral
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = admiral
								NOT = { has_trait = pw_leader_trait_admiral_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.713 }
				}
				1 = { #General
					modifier = {
						factor = 0
						NOT = {
							any_owned_leader = {
								leader_class = general
								NOT = { has_trait = pw_leader_trait_general_codex_of_past_ages }
							}
						}
					}
					country_event = { id = pw_holy_reliquary.714 }
				}
			}
		}
	}

	#Codex of Future Ages
	option = {
		name = pw_holy_reliquary.701.b
		custom_tooltip = pw_holy_reliquary.701.b.tooltip
		allow = {
			NOT = { has_modifier = pw_holy_reliquary_discovery_codex_of_future_ages }
			resource_stockpile_compare = {
				resource = influence
				value >= @pw_holy_reliquary_change_artifact_cost_check
			}
		}
		add_resource = {
			influence = @pw_holy_reliquary_change_artifact_cost
		}
		add_modifier = {
			modifier = pw_holy_reliquary_discovery_codex_of_future_ages
		}
		if = {
			limit = {
				has_modifier = pw_holy_reliquary_discovery_codex_of_past_ages
			}
			remove_modifier = pw_holy_reliquary_discovery_codex_of_past_ages
		}
		hidden_effect = {
			country_event = { id = pw_holy_reliquary.1009 } #Random Flavour Event
			random_list = {
				1 = {
					country_event = { id = pw_holy_reliquary.720 }
				}
				1 = {
					country_event = { id = pw_holy_reliquary.721 }
				}
				1 = {
					country_event = { id = pw_holy_reliquary.722 }
				}
			}
		}
	}

	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#Effects Description:
#Codex of the Past Ages (Ruler)
country_event = {
	id = pw_holy_reliquary.710
	title = pw_holy_reliquary.710.name
	desc = pw_holy_reliquary.710.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.710.a
		ruler = {
			add_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
			add_experience = 100
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Past Ages (Governor)
country_event = {
	id = pw_holy_reliquary.711
	title = pw_holy_reliquary.711.name
	desc = pw_holy_reliquary.711.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.710.a
		random_owned_leader = {
			limit = {
				leader_class = governor
				NOT = { has_trait = pw_leader_trait_governor_codex_of_past_ages }
			}
			add_trait = pw_leader_trait_governor_codex_of_past_ages
			add_experience = 100
			hidden_effect = {
				add_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Past Ages (Scientist)
country_event = {
	id = pw_holy_reliquary.712
	title = pw_holy_reliquary.712.name
	desc = pw_holy_reliquary.712.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.710.a
		random_owned_leader = {
			limit = {
				leader_class = scientist
				NOT = { has_trait = pw_leader_trait_scientist_codex_of_past_ages }
			}
			add_trait = pw_leader_trait_scientist_codex_of_past_ages
			add_experience = 100
			hidden_effect = {
				add_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Past Ages (Admiral)
country_event = {
	id = pw_holy_reliquary.713
	title = pw_holy_reliquary.713.name
	desc = pw_holy_reliquary.713.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.710.a
		random_owned_leader = {
			limit = {
				leader_class = admiral
				NOT = { has_trait = pw_leader_trait_admiral_codex_of_past_ages }
			}
			add_trait = pw_leader_trait_admiral_codex_of_past_ages
			add_experience = 100
			hidden_effect = {
				add_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Past Ages (General)
country_event = {
	id = pw_holy_reliquary.714
	title = pw_holy_reliquary.714.name
	desc = pw_holy_reliquary.714.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.710.a
		random_owned_leader = {
			limit = {
				leader_class = general
				NOT = { has_trait = pw_leader_trait_general_codex_of_past_ages }
			}
			add_trait = pw_leader_trait_general_codex_of_past_ages
			add_experience = 100
			hidden_effect = {
				add_ruler_trait = pw_leader_trait_ruler_codex_of_past_ages
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Future Ages (Physics)
country_event = {
	id = pw_holy_reliquary.720
	title = pw_holy_reliquary.720.name
	desc = pw_holy_reliquary.720.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.720.a
		add_random_research_option = {
			area = physics
			add_progress = 0.10
			fail_effects = {
				add_monthly_resource_mult = {
					resource = physics_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Future Ages (Society)
country_event = {
	id = pw_holy_reliquary.721
	title = pw_holy_reliquary.721.name
	desc = pw_holy_reliquary.721.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.720.a
		add_random_research_option = {
			area = society
			add_progress = 0.10
			fail_effects = {
				add_monthly_resource_mult = {
					resource = society_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Codex of the Future Ages (Engineering)
country_event = {
	id = pw_holy_reliquary.722
	title = pw_holy_reliquary.722.name
	desc = pw_holy_reliquary.722.desc
	picture = GFX_evt_codex_of_the_ages
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	option = {
		name = pw_holy_reliquary.720.a
		add_random_research_option = {
			area = engineering
			add_progress = 0.10
			fail_effects = {
				add_monthly_resource_mult = {
					resource = engineering_research
					value = @tier3researchreward
					min = @tier3researchmin
					max = @tier3researchmax
				}
			}
		}
		pw_holy_reliquary_return_to_hub = yes
	}
}

#Flavour Random Events:
#Apocryphal Writings
country_event = {
	id = pw_holy_reliquary.750
	title = pw_holy_reliquary.750.name
	desc = pw_holy_reliquary.750.desc
	picture = GFX_evt_codex_of_the_ages
	is_triggered_only = yes

	#Canonize the texts
	option = {
		name = pw_holy_reliquary.750.a
		add_monthly_resource_mult = {
			resource = unity
			value = @tier3unityreward
			min = @tier3unitymin
			max = @tier3unitymax
		}
	}
	#Burn the heretic texts
	option = {
		name = pw_holy_reliquary.750.b
		add_monthly_resource_mult = {
			resource = influence
			value = @tier3influencereward
			min = @tier3influencemin
			max = @tier3influencemax
		}
	}
	#Concede them to ruler
	option = {
		name = pw_holy_reliquary.750.c
		ruler = {
			add_experience = 300
		}
	}
}

#Appoint Relic Keeper
country_event = {
	id = pw_holy_reliquary.800
	title = pw_holy_reliquary.800.name
	desc = pw_holy_reliquary.800.desc
	picture = GFX_evt_psionics
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	#Appoint
	option = {
		name = pw_holy_reliquary.1.appoint_relic_keeper
		custom_tooltip = pw_holy_reliquary.800.a.tooltip
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 50
			}
		}
		add_resource = {
			influence = -50
		}
		hidden_effect = {
			set_country_flag = pw_holy_reliquary_relic_keeper_appointed
		}
		pw_holy_reliquary_return_to_hub = yes
	}

	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#Venerate Tradition
country_event = {
	id = pw_holy_reliquary.900
	title = pw_holy_reliquary.900.name
	desc = pw_holy_reliquary.900.desc
	picture = GFX_evt_unity_symbol
	show_sound = event_mystic_reveal_light
	is_triggered_only = yes

	#Tech
	option = {
		name = pw_holy_reliquary.900.a
		allow = {
			pw_has_unity_to_sanctify_artifact = yes
		}
		pw_holy_reliquary_pay_sanctify_cost = yes
		add_research_option = pw_tech_holy_reliquary_venerable_tradition
		hidden_effect = {
			set_country_flag = pw_holy_reliquary_venerated_tradition
		}
		pw_holy_reliquary_return_to_hub = yes
	}

	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#Change Tradition Philosophy
country_event = {
	id = pw_holy_reliquary.1000
	title = pw_holy_reliquary.1000.name
	desc = pw_holy_reliquary.1000.desc
	picture = GFX_evt_surreal_visions
	show_sound = event_mystic_reveal
	is_triggered_only = yes

	#Original
	option = {
		name = pw_holy_reliquary.1000.a
		custom_tooltip = pw_holy_reliquary.1000.a.tooltip
		allow = {
			custom_tooltip = {
				fail_text = pw_holy_reliquary.1000.tooltip
				has_country_flag = pw_holy_reliquary_alternate_traditions
			}
			resource_stockpile_compare = {
				resource = influence
				value >= 25
			}
		}
		add_resource = {
			influence = 25
		}
		hidden_effect = {
			remove_country_flag = pw_holy_reliquary_alternate_traditions
			country_event = { id = pw_holy_reliquary.1000 }
		}
	}

	#Alternative
	option = {
		name = pw_holy_reliquary.1000.b
		custom_tooltip = pw_holy_reliquary.1000.b.tooltip
		allow = {
			custom_tooltip = {
				fail_text = pw_holy_reliquary.1000.tooltip
				NOT = { has_country_flag = pw_holy_reliquary_alternate_traditions }
			}
			resource_stockpile_compare = {
				resource = influence
				value >= 25
			}
		}
		add_resource = {
			influence = 25
		}
		hidden_effect = {
			set_country_flag = pw_holy_reliquary_alternate_traditions
			country_event = { id = pw_holy_reliquary.1000 }
		}
	}

	#Return
	option = {
		name = pw_holy_reliquary.return
		pw_holy_reliquary_return_to_hub = yes
	}

	#Leave the reliquary
	option = {
		name = pw_holy_reliquary.leave
		pw_holy_reliquary_leave = yes
	}
}

#General Random Events:
#Random event choice:
country_event = {
	id = pw_holy_reliquary.1009
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		random_list = {
			5 = {}
			1 = {
				country_event = {
					id = pw_holy_reliquary.1010
					days = @pw_halfYear
					random = @pw_halfYear
				}
			}
			1 = {
				country_event = {
					id = pw_holy_reliquary.1011
					days = @pw_halfYear
					random = @pw_halfYear
				}
			}
		}
	}
}

#Peregrination Overflow (after 3 relics are sanctified)
country_event = {
	id = pw_holy_reliquary.1010
	title = pw_holy_reliquary.1010.name
	desc = pw_holy_reliquary.1010.desc
	picture = GFX_evt_alien_propaganda
	show_sound = event_cityscape
	is_triggered_only = yes
	location = event_target:pw_holy_reliquary_planet

	trigger = {
		NOT = { has_country_flag = pw_holy_reliquary_peregrination_event }
		check_variable = {
			which = pw_sanctified_artifacts_count
			value > 2
		}
		any_owned_planet = {
			has_building = pw_building_holy_reliquary
		}
	}

	immediate = {
		#Get the planet with Holy Reliquary
		random_owned_planet = {
			limit = {
				has_building = pw_building_holy_reliquary
			}
			save_event_target_as = pw_holy_reliquary_planet
		}
		set_timed_country_flag = {
			flag = pw_holy_reliquary_peregrination_event
			days = @pw_10years
		}
	}

	#Provide accommodation
	option = {
		name = pw_holy_reliquary.1010.a
		allow = {
			resource_stockpile_compare = {
				resource = consumer_goods
				value >= 1000
			}
			resource_stockpile_compare = {
				resource = energy
				value >= 1500
			}
		}
		add_resource = {
			consumer_goods = -1000
			energy = -1500
		}
		event_target:pw_holy_reliquary_planet = {
			create_pop = {
				species = owner
			}
		}
	}

	#Prevent them from coming
	option = {
		name = pw_holy_reliquary.1010.b
		allow = {
			resource_stockpile_compare = {
				resource = influence
				value >= 25
			}
		}
		add_resource = {
			influence = -25
		}
	}

	#Unfortunate
	option = {
		name = pw_holy_reliquary.1010.c
		event_target:pw_holy_reliquary_planet = {
			add_deposit = d_decrepit_dwellings
		}
	}
}

#Love Celebration
country_event = {
	id = pw_holy_reliquary.1011
	title = pw_holy_reliquary.1011.name
	desc = pw_holy_reliquary.1011.desc
	picture = GFX_evt_diplomatic_visit
	show_sound = event_celebration
	is_triggered_only = yes
	location = event_target:pw_holy_reliquary_planet

	trigger = {
		NOT = { has_country_flag = pw_holy_reliquary_marriage_event }
		check_variable = {
			which = pw_sanctified_artifacts_count
			value > 2
		}
		any_owned_planet = {
			has_building = pw_building_holy_reliquary
		}
		any_owned_leader = {
			NOR = {
				has_trait = leader_trait_governor_gray
				has_trait = leader_trait_governor_oracle
				has_trait = leader_trait_paranoid
			}
		}
	}

	immediate = {
		#Get the planet with Holy Reliquary
		random_owned_planet = {
			limit = {
				has_building = pw_building_holy_reliquary
			}
			save_event_target_as = pw_holy_reliquary_planet
		}
		#Get leader
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = leader_trait_governor_gray
					has_trait = leader_trait_governor_oracle
					has_trait = leader_trait_paranoid
				}
			}
			save_event_target_as = pw_holy_reliquary_marriage_leader
		}
		set_timed_country_flag = {
			flag = pw_holy_reliquary_marriage_event
			days = @pw_10years
		}
	}

	#Approve the ceremony
	option = {
		name = pw_holy_reliquary.1011.a
		add_monthly_resource_mult = {
			resource = unity
			value = @tier4unityreward
			min = @tier4unitymin
			max = @tier4unitymax
		}
	}

	#Send Gifts
	option = {
		name = pw_holy_reliquary.1011.b
		allow = {
			resource_stockpile_compare = {
				resource = consumer_goods
				value >= 500
			}
		}
		add_resource = {
			consumer_goods = -500
		}
		add_monthly_resource_mult = {
			resource = unity
			value = @tier4unityreward
			min = @tier4unitymin
			max = @tier4unitymax
		}
		add_monthly_resource_mult = {
			resource = influence
			value = @tier3influencereward
			min = @tier3influencemin
			max = @tier3influencemax
		}
	}

	#Disapprove the Ceremony
	option = {
		name = pw_holy_reliquary.1011.c
		add_monthly_resource_mult = {
			resource = influence
			value = @tier2influencereward
			min = @tier2influencemin
			max = @tier2influencemax
		}
	}
}

#Leader Death
country_event = {
	id = pw_holy_reliquary.1012
	title = pw_holy_reliquary.1012.name
	desc = pw_holy_reliquary.1012.desc
	picture = GFX_evt_conclave
	is_triggered_only = yes
	location = event_target:pw_holy_reliquary_planet

	trigger = {
		NOT = { has_country_flag = pw_holy_reliquary_death_event }
		any_owned_planet = {
			has_building = pw_building_holy_reliquary
		}
		FROM = {
			NOR = {
				has_trait = leader_trait_corrupt
				has_trait = leader_trait_substance_abuser
				has_trait = leader_trait_paranoid
			}
		}
		check_variable = {
			which = pw_sanctified_artifacts_count
			value > 2
		}
		any_owned_planet = {
			has_building = pw_building_holy_reliquary
		}
	}

	immediate = {
		#Get the planet with Holy Reliquary
		random_owned_planet = {
			limit = {
				has_building = pw_building_holy_reliquary
			}
			save_event_target_as = pw_holy_reliquary_planet
		}
		set_timed_country_flag = {
			flag = pw_holy_reliquary_death_event
			days = @pw_10years
		}
	}

	#Approve the ceremony
	option = {
		name = pw_holy_reliquary.1012.a
		add_monthly_resource_mult = {
			resource = unity
			value = @tier4unityreward
			min = @tier4unitymin
			max = @tier4unitymax
		}
	}

	#Find another place
	option = {
		name = pw_holy_reliquary.1012.b
		add_monthly_resource_mult = {
			resource = influence
			value = @tier3influencereward
			min = @tier3influencemin
			max = @tier3influencemax
		}
	}
}

#Ai Events to simulate usage -> 1101
#Expansion
country_event = {
	id = pw_holy_reliquary.1101
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_modifier = pw_holy_reliquary_expansion_extrospective_gaze }
			}
			add_modifier = { modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		}

		if = {
			limit = {
				NOR = {
					has_tech_option = pw_tech_holy_reliquary_inward_expansion
					has_technology = pw_tech_holy_reliquary_inward_expansion
				}
			}
			add_research_option = pw_tech_holy_reliquary_inward_expansion
		}

		random_owned_planet = {
			limit = {
				NOT = { has_modifier = pw_holy_reliquary_expansion_reflective_meditation }
			}
			add_modifier = {
				modifier = pw_holy_reliquary_expansion_reflective_meditation
				days = @pw_5years
			}
		}

		country_event = {
			id = pw_holy_reliquary.1102
			days = @pw_5years
		}
	}
}

#Domination
country_event = {
	id = pw_holy_reliquary.1102
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_modifier = pw_holy_reliquary_domination_way_of_the_solar_regent }
			}
			add_modifier = { modifier = pw_holy_reliquary_domination_way_of_the_solar_regent }
		}

		random_owned_planet = {
			limit = {
				NOT = { has_deposit = pw_d_monument_to_the_solar_regent }
				NOT = { has_deposit = pw_d_parliament_of_the_void_speakers }
			}
			add_deposit = pw_d_monument_to_the_solar_regent
		}

		country_event = {
			id = pw_holy_reliquary.1103
			days = @pw_5years
		}
	}
}

#Prosperity
country_event = {
	id = pw_holy_reliquary.1103
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		# if = {
		# 	limit = {
		# 		NOT = { has_modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# 	}
		# 	add_modifier = { modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# }

		country_event = {
			id = pw_holy_reliquary.1104
			days = @pw_5years
		}
	}
}

#Harmony
country_event = {
	id = pw_holy_reliquary.1104
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		# if = {
		# 	limit = {
		# 		NOT = { has_modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# 	}
		# 	add_modifier = { modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# }

		country_event = {
			id = pw_holy_reliquary.1105
			days = @pw_5years
		}
	}
}

#Supremacy
country_event = {
	id = pw_holy_reliquary.1105
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		# if = {
		# 	limit = {
		# 		NOT = { has_modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# 	}
		# 	add_modifier = { modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# }

		country_event = {
			id = pw_holy_reliquary.1106
			days = @pw_5years
		}
	}
}

#Diplomacy
country_event = {
	id = pw_holy_reliquary.1106
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		# if = {
		# 	limit = {
		# 		NOT = { has_modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# 	}
		# 	add_modifier = { modifier = pw_holy_reliquary_expansion_extrospective_gaze }
		# }

		country_event = {
			id = pw_holy_reliquary.1107
			days = @pw_5years
		}
	}
}

#Discovery
country_event = {
	id = pw_holy_reliquary.1107
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		is_ai = yes
	}

	immediate = {
		if = {
			limit = {
				NOT = { has_modifier = pw_holy_reliquary_discovery_codex_of_future_ages }
			}
			add_modifier = { modifier = pw_holy_reliquary_discovery_codex_of_future_ages }
		}
	}
}
