namespace = pw_wonder

# Initial event to say this mod is active.
event = {
	id = pw_wonder.0
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	immediate = { set_global_flag = pw_active }
}

#Message for wonder construction complete
# UNUSED!
planet_event = {
	id = pw_wonder.1
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_space_elevator_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = WONDER
				scope = FROM
			}
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}
	}
}

# Space Elevator -> id 100

#On Space Elevator built
planet_event = {
	id = pw_wonder.100
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_space_elevator_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.101 }
		planet_event = { id = pw_wonder.102 }
	}
}

#On first time Space Elevator is built (regular empire)
planet_event = {
	id = pw_wonder.101
	title = pw_wonder.101.name
	desc = pw_wonder.101.desc
	picture = GFX_evt_metropolis
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.101.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
		# 	owner = { is_xenophobe = no }
		# }
	}

	option = {
		name = pw_wonder.101.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
		# 	owner = { is_xenophile = no }
		# }
	}

	trigger = {
		NOT = {owner = {has_country_flag = space_elevator_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = space_elevator_built }
	}
}

#On first time Space Elevator is built (gestalt)
planet_event = {
	id = pw_wonder.102
	title = pw_wonder.102.name
	desc = pw_wonder.102.desc
	picture = GFX_evt_metropolis
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.102.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.102.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = {has_country_flag = space_elevator_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = space_elevator_built }
	}
}

# Particle Supercollider -> id 200

#On Particle Supercollider built
planet_event = {
	id = pw_wonder.200
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_particle_supercollider_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.201 }
		planet_event = { id = pw_wonder.202 }
	}
}

#On first time Particle Supercollider is built (Regular Empire)
planet_event = {
	id = pw_wonder.201
	title = pw_wonder.201.name
	desc = pw_wonder.201.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.201.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
			# owner = { is_spiritualist = no }
		# }
	}

	option = {
		name = pw_wonder.201.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
			# owner = { is_materialist = no }
		# }
	}

	trigger = {
		NOT = {owner = {has_country_flag = particle_supercollider_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = particle_supercollider_built }
	}
}

#On first time Particle Supercollider is built (Gestalt)
planet_event = {
	id = pw_wonder.202
	title = pw_wonder.202.name
	desc = pw_wonder.202.desc
	picture = GFX_evt_ancient_databank
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.202.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.202.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = {has_country_flag = particle_supercollider_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = particle_supercollider_built }
	}
}

# Domed City -> id 300

#On Domed City built
planet_event = {
	id = pw_wonder.300
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_domed_city_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.301 }
		planet_event = { id = pw_wonder.302 }
	}
}

#On first time Domed City is built (Regular Empire)
planet_event = {
	id = pw_wonder.301
	title = pw_wonder.301.name
	desc = pw_wonder.301.desc
	picture = GFX_evt_society_research
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.301.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
			# owner = { is_authoritarian = no }
		# }
	}

	option = {
		name = pw_wonder.301.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
			# owner = { is_egalitarian = no }
		# }
	}

	trigger = {
		NOT = {owner = {has_country_flag = domed_city_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = domed_city_built }
	}
}

#On first time Domed City is built (Gestalt)
planet_event = {
	id = pw_wonder.302
	title = pw_wonder.302.name
	desc = pw_wonder.302.desc
	picture = GFX_evt_society_research
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.302.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.302.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = {has_country_flag = domed_city_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = domed_city_built }
	}
}

# Abyssal Crater Test Site -> id 400

#On Abyssal Crater Test Site built
planet_event = {
	id = pw_wonder.400
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_abyssal_crater_test_site_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.401 }
		planet_event = { id = pw_wonder.402 }
	}
}

#On first time Abyssal Crater Test Site is built (regular Empire)
planet_event = {
	id = pw_wonder.401
	title = pw_wonder.401.name
	desc = pw_wonder.401.desc
	picture = GFX_evt_underground_civilization
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.401.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
			# owner = { is_militarist = no }
		# }
	}

	option = {
		name = pw_wonder.401.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		# trigger = {
			# owner = { is_pacifist = no }
		# }
	}

	trigger = {
		NOT = {owner = { has_country_flag = abyssal_crater_test_site_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = abyssal_crater_test_site_built }
	}
}

#On first time Abyssal Crater Test Site is built (Gestalt)
planet_event = {
	id = pw_wonder.402
	title = pw_wonder.402.name
	desc = pw_wonder.402.desc
	picture = GFX_evt_underground_civilization
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.402.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.402.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = abyssal_crater_test_site_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = abyssal_crater_test_site_built }
	}
}

# Erebus Project -> id 500

#On Erebus Project built
planet_event = {
	id = pw_wonder.500
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_erebus_project_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.501 }
		planet_event = { id = pw_wonder.502 }
	}
}

#On first time Erebus Project is built (Regular Empire)
planet_event = {
	id = pw_wonder.501
	title = pw_wonder.501.name
	desc = pw_wonder.501.desc
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.501.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = erebus_project_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = erebus_project_built }
	}
}

#On first time Erebus Project is built (Gestalt)
planet_event = {
	id = pw_wonder.502
	title = pw_wonder.502.name
	desc = pw_wonder.502.desc
	picture = GFX_evt_mining_operations
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.502.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = erebus_project_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = erebus_project_built }
	}
}

# Helios Tower -> id 600

#On Helios Tower built
planet_event = {
	id = pw_wonder.600
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_helios_tower_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.601 }
		planet_event = { id = pw_wonder.602 }
	}
}

#On first time Helios Tower is built (Regular Empire)
planet_event = {
	id = pw_wonder.601
	title = pw_wonder.601.name
	desc = pw_wonder.601.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.601.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = helios_tower_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = helios_tower_built }
	}
}

#On first time Helios Tower is built (Gestalt)
planet_event = {
	id = pw_wonder.602
	title = pw_wonder.602.name
	desc = pw_wonder.602.desc
	picture = GFX_evt_sapient_AI
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.602.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = helios_tower_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = helios_tower_built }
	}
}

# Demetrius Cornucopia -> id 700

#On Demetrius Cornucopia built
planet_event = {
	id = pw_wonder.700
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_demetrius_fields_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.701 }
		planet_event = { id = pw_wonder.702 }
	}
}

#On first time Demetrius Cornucopia is built (Regular Empire)
planet_event = {
	id = pw_wonder.701
	title = pw_wonder.701.name
	desc = pw_wonder.701.desc
	picture = GFX_evt_alien_nature
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.701.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = demetrius_fields_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = demetrius_fields_built }
	}
}

#On first time Demetrius Cornucopia is built (Gestalt)
planet_event = {
	id = pw_wonder.702
	title = pw_wonder.702.name
	desc = pw_wonder.702.desc
	picture = GFX_evt_alien_nature
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.702.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = demetrius_fields_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = demetrius_fields_built }
	}
}

# Astronomical Model Bureau -> id 800

#On Astronomical Model Bureau built
planet_event = {
	id = pw_wonder.800
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_galactic_model_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.801 }
		planet_event = { id = pw_wonder.802 }
	}
}

#On first time Astronomical Model Bureau is built (Regular Empire)
planet_event = {
	id = pw_wonder.801
	title = pw_wonder.801.name
	desc = pw_wonder.801.desc
	picture = GFX_evt_clocks
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.801.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.801.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
		trigger = {
			owner = { is_spiritualist = yes }
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = galactic_model_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = galactic_model_built }
	}
}

#On first time Astronomical Model Bureau is built (Gestalt)
planet_event = {
	id = pw_wonder.802
	title = pw_wonder.802.name
	desc = pw_wonder.802.desc
	picture = GFX_evt_clocks
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.802.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.802.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_unity
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = galactic_model_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = galactic_model_built }
	}
}

# Panopticon -> id 900

#On Panopticon built
planet_event = {
	id = pw_wonder.900
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_panopticon_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.901 }
	}
}

#On first time Panopticon is built (Regular Empire)
planet_event = {
	id = pw_wonder.901
	title = pw_wonder.901.name
	desc = pw_wonder.901.desc
	picture = GFX_evt_announcement
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.901.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.901.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = panopticon_built }}
	}

	immediate = {
		owner = { set_country_flag = panopticon_built }
	}
}

# Enigma Engine -> id 1000

#On Enigma Engine built
planet_event = {
	id = pw_wonder.1000
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_enigma_engine_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.1001 }
	}
}

#On first time Enigma Engine is built (Machine Empire)
planet_event = {
	id = pw_wonder.1001
	title = pw_wonder.1001.name
	desc = pw_wonder.1001.desc
	picture = GFX_evt_relic_shipyard
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.1001.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	option = {
		name = pw_wonder.1001.b
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = enigma_engine_built }}
	}

	immediate = {
		owner = { set_country_flag = enigma_engine_built }
	}
}

# If last tech researched was Metaphysical Singularity and minor artifacts are needed
country_event = {
	id = pw_wonder.1002
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ancrel = yes
		last_increased_tech = pw_tech_metaphysical_singularity
		resource_stockpile_compare = {
			resource = minor_artifacts
			value < 10
		}
	}

	immediate = {
		country_event = {
			id = pw_wonder.1003
			days = 30
			random = 30
		}
	}
}

# Get some minor artifacts to build the Enigma Engine.
country_event = {
	id = pw_wonder.1003
	title = pw_wonder.1003.name
	desc = pw_wonder.1003.desc
	picture = GFX_evt_analyzing_artifacts
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	trigger = {
		has_ancrel = yes
		has_technology = pw_tech_metaphysical_singularity
	}

	option = {
		name = pw_wonder.1003.a
		add_resource = {
			minor_artifacts = 15
		}
	}
}

# Solipsist Debate Hall -> id 1100

#On Solipsist Debate Hall built
planet_event = {
	id = pw_wonder.1100
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_solipsist_debate_hall_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.1101 }
		owner = {
			country_event = {
				id = pw_solipsist_debate.1
			}
		}
	}
}

#On first time Solipsist Debate Hall is built (Hive Empire)
planet_event = {
	id = pw_wonder.1101
	title = pw_wonder.1101.name
	desc = pw_wonder.1101.desc
	picture = GFX_evt_hive_mind
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.1101.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = solipsist_debate_hall_built }}
	}

	immediate = {
		owner = { set_country_flag = solipsist_debate_hall_built }
	}
}

# If last tech researched was Metacognition Dialectics and minor artifacts are needed.
country_event = {
	id = pw_wonder.1102
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_ancrel = yes
		last_increased_tech = pw_tech_metacognition_dialectics
		resource_stockpile_compare = {
			resource = minor_artifacts
			value < 10
		}
	}

	immediate = {
		country_event = {
			id = pw_wonder.1103
			days = 30
			random = 30
		}
	}
}

# Get some minor artifacts to build the Solipsist Debate Hall.
country_event = {
	id = pw_wonder.1103
	title = pw_wonder.1103.name
	desc = pw_wonder.1103.desc
	picture = GFX_evt_analyzing_artifacts
	show_sound = event_laboratory_sound
	is_triggered_only = yes

	trigger = {
		has_ancrel = yes
		has_technology = pw_tech_metacognition_dialectics
	}

	option = {
		name = pw_wonder.1103.a
		add_resource = {
			minor_artifacts = 15
		}
	}
}

# Guardian Angel -> id 1200

#On Guardian Angel built
planet_event = {
	id = pw_wonder.1200
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
		is_occupied_flag = no
	}

	immediate = {
		create_message = {
			type = BUILDING_CONSTRUCTION_MESSAGE_TYPE
			localization = pw_message_guardian_angel_complete
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}

		planet_event = { id = pw_wonder.1201 } #Regular first time
		planet_event = { id = pw_wonder.1202 } #Gestalt first time
		planet_event = { id = pw_wonder.1203 } #Add flying fortress army
	}
}

#On first time Guardian Angel is built (Regular Empire)
planet_event = {
	id = pw_wonder.1201
	title = pw_wonder.1201.name
	desc = pw_wonder.1201.desc
	picture = GFX_evt_landing_ship_2
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.1201.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = guardian_angel_built }}
		owner = { is_gestalt = no }
	}

	immediate = {
		owner = { set_country_flag = guardian_angel_built }
	}
}

#On first time Guardian Angel is built (Gestalt Empire)
planet_event = {
	id = pw_wonder.1202
	title = pw_wonder.1202.name
	desc = pw_wonder.1202.desc
	picture = GFX_evt_landing_ship_2
	show_sound = event_construction
	is_triggered_only = yes
	location = THIS

	option = {
		name = pw_wonder.1202.a
		if = {
			limit = {
				NOR = {
					has_modifier = pw_mod_wonder_built_recently_happiness
					has_modifier = pw_mod_wonder_built_recently_unity
				}
			}
			add_modifier = {
				modifier = pw_mod_wonder_built_recently_happiness
				days = 1800 # 5 years
			}
		}
	}

	trigger = {
		NOT = {owner = { has_country_flag = guardian_angel_built }}
		owner = { is_gestalt = yes }
	}

	immediate = {
		owner = { set_country_flag = guardian_angel_built }
	}
}

#On Guardian Angel built add army
planet_event = {
	id = pw_wonder.1203
	hide_window = yes
	is_triggered_only = yes
	location = THIS

	trigger = {
		has_building = pw_building_guardian_angel
		NOT = {
			any_planet_army = {
				army_type = pw_army_flying_fortress
			}
		}
	}

	immediate = {
		create_army = {
			name = pw_army_flying_fortress_name
			owner = THIS.owner
			type = pw_army_flying_fortress
		}
	}

}

#On Guardian Angel destroyed/replaced ->
planet_event = {
	id = pw_wonder.1204
	hide_window = yes
	is_triggered_only = yes
	location = THIS

	trigger = {
		last_building_changed = pw_building_guardian_angel
	}

	immediate = {
		planet_event = {
			id = pw_wonder.1205
		}
	}
}

# -> remove Flying Fortress
planet_event = {
	id = pw_wonder.1205
	hide_window = yes
	is_triggered_only = yes
	location = THIS

	trigger = {
		NOT = { has_building = pw_building_guardian_angel }
		any_planet_army = {
			army_type = pw_army_flying_fortress
		}
	}

	immediate = {
		every_planet_army = {
			if = {
				limit = { army_type = pw_army_flying_fortress }
				remove_army = yes
			}
		}
	}
}

#On Flying Fortress is rebuild
planet_event = {
	id = pw_wonder.1206
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	immediate = {
		create_message = {
			type = ARMY_RECRUITMENT
			localization = pw_message_guardian_angel_flying_fortress_rebuild
			days = 30
			target = THIS
			variable = {
				type = name
				localization = PLANET
				scope = ROOT
			}
		}
	}
}
